<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">
    <changeSet id="1" author="as">
        <mergeColumns  column1Name="first_name"
                       column2Name="last_name"
                       finalColumnName="full_name"
                       finalColumnType="varchar(255)"
                       joinString=" "
                       tableName="authors"/>
        <rollback>
            <dropColumn tableName="authors"
                        columnName="full_name"/>
            <addColumn tableName="authors">
                <column name="first_name"
                        type="varchar(255)"
                        position="2">
                </column>
            </addColumn>
            <addColumn tableName="authors">
                <column name="last_name"
                        type="varchar(255)"
                        position="3">
                </column>
            </addColumn>
            <update tableName="authors">
                <column name="first_name"
                        value="Eileen"/>
                <where>id='1'</where>
            </update>
            <update tableName="authors">
                <column name="first_name"
                        value="Tamia"/>
                <where>id='2'</where>
            </update>
            <update tableName="authors">
                <column name="first_name"
                        value="Cyril"/>
                <where>id='3'</where>
            </update>
            <update tableName="authors">
                <column name="first_name"
                        value="Nicolas"/>
                <where>id='4'</where>
            </update>
            <update tableName="authors">
                <column name="first_name"
                        value="Jayden"/>
                <where>id='5'</where>
            </update>
            <update tableName="authors">
                <column name="last_name"
                        value="Lubowitz"/>
                <where>id='1'</where>
            </update>
            <update tableName="authors">
                <column name="last_name"
                        value="Mayert"/>
                <where>id='2'</where>
            </update>
            <update tableName="authors">
                <column name="last_name"
                        value="Funk"/>
                <where>id='3'</where>
            </update>
            <update tableName="authors">
                <column name="last_name"
                        value="Buckridge"/>
                <where>id='4'</where>
            </update>
            <update tableName="authors">
                <column name="last_name"
                        value="Walter"/>
                <where>id='5'</where>
            </update>
            <addNotNullConstraint tableName="authors"
                                  columnName="first_name"
                                  columnDataType="varchar(255)"/>
            <addNotNullConstraint tableName="authors"
                                  columnName="last_name"
                                  columnDataType="varchar(255)"/>
        </rollback>
    </changeSet>
</databaseChangeLog>