databaseChangeLog:
  - changeSet:
      id: 1
      author: IntegrationTest
      changes:
        - sql: "CREATE OR ALTER FILE FORMAT ItTestFileFormat
              TYPE = CSV
              FIELD_DELIMITER = '|'
              SKIP_HEADER = 1
              NULL_IF = ('NULL', 'null')
              EMPTY_FIELD_AS_NULL = true
              COMPRESSION = DEFLATE;"
      rollback:
        - sql: "DROP FILE FORMAT IF EXISTS ItTestFileFormat;"
  - changeSet:
      id: 2
      author: IntegrationTest
      changes:
        - sql: "CREATE OR ALTER TAG T1 ALLOWED_VALUES 'INTERNAL', 'AWS', 'AWS_COMPAT', 'AZURE', 'GCP';"
      rollback:
        - sql: "DROP TAG IF EXISTS T1;"
  - changeSet:
      id: 3
      author: IntegrationTest
      changes:
        - createStage:
            stageName: "testStage"
            stageType: "INTERNAL"
            fileFormat:
              fileFormatName: "ItTestFileFormat"
              fileFormatType: "CSV"
              formatTypeOptions:
                - entry:
                    key: "SKIP_HEADER"
                    value: "2"
                - entry:
                    key: "COMPRESSION"
                    value: "GZIP"
            stageParams:
              storageEncryptionType: "SNOWFLAKE_SSE"
            directoryTableParams:
              enable: "true"
              autoRefresh: "true"
            tag:
              tagName: "T1"
              tagValue: "INTERNAL"