{
  "databaseChangeLog": [
    {
      "changeSet": {
        "id": "1",
        "author": "itTest",
        "changes": [
          {
            "createCompositeType": {
              "name": "myTypeForSchemaTest",
              "typeAttributes": [
                {
                  "typeAttribute": {
                    "name": "attr1",
                    "type": "integer"
                  }
                },
                {
                  "typeAttribute": {
                    "name": "attr2",
                    "type": "text",
                    "collation": "en_US"
                  }
                }
              ]
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "2",
        "author": "itTest",
        "changes": [
          {
            "sql": {
              "sql": "CREATE SCHEMA IF NOT EXISTS test_schema;"
            }
          }
        ]
      }
    },
    {
      "changeSet": {
        "id": "3",
        "author": "itTest",
        "changes": [
          {
            "changeCompositeTypeSchema": {
              "typeName": "myTypeForSchemaTest",
              "oldSchemaName": "public",
              "newSchemaName": "test_schema"
            }
          }
        ],
        "rollback": {
          "changes": [
            {
              "sql": {
                "sql": "ALTER TYPE test_schema.\"myTypeForSchemaTest\" SET SCHEMA public;"
              }
            }
          ]
        }
      }
    },
    {
      "changeSet": {
        "id": "4",
        "author": "itTest",
        "changes": [
          {
            "sql": {
              "sql": "SELECT 1 FROM pg_catalog.pg_type t \nJOIN pg_catalog.pg_namespace n ON t.typnamespace = n.oid\nWHERE t.typname = 'myTypeForSchemaTest' AND n.nspname = 'test_schema';"
            }
          }
        ]
      }
    }
  ]
}